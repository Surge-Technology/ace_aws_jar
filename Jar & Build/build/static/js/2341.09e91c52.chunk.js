"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2341],{607:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(1413),s=n(29439),r=n(72791),i=n(57689),l=n(22976),c=n(84951),d=n(18491),o=n(24021),u=n(77710),m=n(9085),h=(n(5462),n(63263)),p=n(21830),x=n.n(p),g=n(59513),j=n.n(g),v=n(72426),y=n.n(v),f=n.p+"static/media/event-planning.5bb8223b4e16d444f53c.webp",T=n(80184),C=function(){var e=(0,r.useState)({title:"",eventType:"",eventCategory:"",description:"",registrationFee:"",perdayFee:"",alldayCheck:!0,customCheck:!1,startDateAll:null,startTimeAll:null,endTimeAll:null,startDate:null,endDate:null,startTime:null,endTime:null}),t=(0,s.Z)(e,2),n=t[0],p=t[1],g=(0,r.useState)([{mathValue:"",greaterlessnumber:"",discountfeeValue:"",discountfeeNumber:""}]),v=(0,s.Z)(g,2),C=v[0],D=v[1],b=(0,r.useState)(""),q=(0,s.Z)(b,2),F=q[0],N=q[1],_=(0,r.useState)(""),A=(0,s.Z)(_,2),w=A[0],V=A[1],k=(0,r.useState)(""),B=(0,s.Z)(k,2),S=B[0],X=B[1],Z=(0,r.useState)(""),J=(0,s.Z)(Z,2),P=J[0],E=J[1],R=(0,i.UO)(),L=(0,i.s0)(),I={title:n.title,eventType:n.eventType,eventCategory:n.eventCategory,description:n.description,registrationFee:n.registrationFee,perdayFee:n.perdayFee,startDateAll:n.startDateAll,startTimeAll:n.startTimeAll,endTimeAll:n.endTimeAll,startDate:n.startDate,endDate:n.endDate,startTime:n.startTime,endTime:n.endTime,pricingLoopValues:C};(0,r.useEffect)((function(){Y(),H(),z(),"new"!==R.id&&u.Z.get("event/".concat(R.id)).then((function(e){var t={value:e.data.eventType.id,label:e.data.eventType.name};!0===e.data.isAllDay?p((0,a.Z)((0,a.Z)({},n),{},{title:e.data.name,eventType:t,description:e.data.description,registrationFee:e.data.registrationFee,perdayFee:e.data.perDay,alldayCheck:e.data.isAllDay,customCheck:e.data.isCustomRange,startDateAll:e.data.allDayEvent.eventDate,startTimeAll:e.data.allDayEvent.startTime,endTimeAll:e.data.allDayEvent.endTime})):p((0,a.Z)((0,a.Z)({},n),{},{title:e.data.name,eventType:t,description:e.data.description,registrationFee:e.data.registrationFee,perdayFee:e.data.perDay,alldayCheck:e.data.isAllDay,customCheck:e.data.isCustomRange}));var s=[];e.data.customRangeEvent.map((function(e,t){s.push({startDate:e.eventDate,startTime:e.startTime,endTime:e.endTime})})),setCustomEventLoopValues(s);var r=[];e.data.eventPricing.map((function(e,t){r.push({mathValue:{value:e.eventPricingCriteria.id,label:e.eventPricingCriteria.name},greaterlessnumber:e.totalDays,discountfeeNumber:e.discount,discountfeeValue:{value:e.discountOrFee.id,label:e.discountOrFee.name}})})),D(r)})).catch((function(e){x().fire(e.response.data.message,"Please try again ")}))}),[]);var Y=function(){u.Z.get("event-type").then((function(e){var t=[];e.data.content.map((function(e,n){t.push({value:e.id,label:e.name})})),N(t)})).catch((function(e){x().fire(e.response.data.message,"Please try again ")}))},H=function(){u.Z.get("event-pricing-criteria").then((function(e){var t=[];e.data.map((function(e,n){t.push({value:e.id,label:e.name})})),X(t)})).catch((function(e){x().fire(e.response.data.message,"Please try again ")}))},z=function(){u.Z.get("discount-or-fee").then((function(e){var t=[];e.data.map((function(e,n){t.push({value:e.id,label:e.name})})),E(t)})).catch((function(e){x().fire(e.response.data.message,"Please try again ")}))},O=function(){p((0,a.Z)((0,a.Z)({},n),{},{alldayCheck:!n.alldayCheck,customCheck:!n.customCheck}))},M=function(){p((0,a.Z)((0,a.Z)({},n),{},{customCheck:!n.customCheck,alldayCheck:!n.alldayCheck}))};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(m.Ix,{}),(0,T.jsxs)(c.Zb,{children:[(0,T.jsx)("h4",{children:(0,T.jsxs)("strong",{children:["new"===R.id?"Create":"Update"," Event"]})}),(0,T.jsxs)(c.X2,{children:[(0,T.jsx)(c.JX,{md:8,children:(0,T.jsx)(c.Zb,{className:"cardbgw",children:(0,T.jsx)(d.J9,{enableReinitialize:"true",initialValues:I,validationSchema:1==n.alldayCheck?function(){return o.object().shape({title:o.string().min(2,"Too Short!").max(70,"Too Long!").required("Title Required"),eventType:o.object().required("Event Type is Required"),eventCategory:o.object().required("Event Category is Required"),startDateAll:o.date().required("Start date is required").nullable(),startTimeAll:o.date().required("Start time is required").nullable(),endTimeAll:o.date().required("End time is required").nullable(),description:o.string().min(2,"Too Short!").required("Description Required"),perdayFee:o.number().positive().required("Perday Fee is required")})}:function(){return o.object().shape({title:o.string().min(2,"Too Short!").max(70,"Too Long!").required("Title Required"),eventType:o.object().required("Event Type is Required"),eventCategory:o.object().required("Event Category is Required"),startDate:o.date().required("Start date is required").nullable(),endDate:o.date().required("End date is required").nullable(),startTime:o.date().required("Start time is required").nullable(),endTime:o.date().required("End time is required").nullable(),description:o.string().min(2,"Too Short!").required("Description Required"),perdayFee:o.number().positive().required("Perday Fee is required"),pricingLoopValues:o.array().of(o.object().shape({mathValue:o.object().required("Select one option"),greaterlessnumber:o.number().required("Days Required"),discountfeeNumber:o.number().required("Discount required"),discountfeeValue:o.object().required("Type required")}))})},onSubmit:function(e){var t=[];e.pricingLoopValues.map((function(e,n){t.push({eventPricingCriteria:{id:e.mathValue.value,name:e.mathValue.label},discountOrFee:{id:e.discountfeeValue.value,name:e.discountfeeValue.label},totalDays:e.greaterlessnumber,discount:e.discountfeeNumber})}));var a={name:e.title,description:e.description,isAllDay:n.alldayCheck,isCustomRange:n.customCheck,registrationFee:""===e.registrationFee?0:e.registrationFee,perDay:e.perdayFee,allDayEvent:{eventDate:y()(e.startDateAll).format("YYYY-MM-DD"),startTime:y()(e.startTimeAll).format("HH:mm:ss"),endTime:y()(e.endTimeAll).format("HH:mm:ss")}},s={name:e.title,description:e.description,isAllDay:n.alldayCheck,isCustomRange:n.customCheck,registrationFee:""===e.registrationFee?0:e.registrationFee,perDay:e.perdayFee,customRangeEvent:{startDate:y()(e.startDate).format("YYYY-MM-DD"),endDate:y()(e.endDate).format("YYYY-MM-DD"),startTime:y()(e.startTime).format("HH:mm:ss"),endTime:y()(e.endTime).format("HH:mm:ss")},eventPricing:t};h.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),!0===n.alldayCheck?h.Z.post("".concat("http://18.216.55.32:8080/api/v1/api","/event-type/").concat(e.eventType.value,"/event-category/").concat(e.eventCategory.value,"/event"),a).then((function(e){201!==e.status&&200!==e.status||(m.Am.success("All day event created successfully",{theme:"colored"}),setTimeout((function(){L("/events")}),1e3))})).catch((function(e){401===e.response.status?x().fire("401 session expired..!","Please re-login"):x().fire(e.response.data.message,"Please try again later")})):h.Z.post("".concat("http://18.216.55.32:8080/api/v1/api","/event-type/").concat(e.eventType.value,"/event-category/").concat(e.eventCategory.value,"/event"),s).then((function(e){201!==e.status&&200!==e.status||(m.Am.success("Custom range event created successfully",{theme:"colored"}),setTimeout((function(){L("/events")}),1e3))})).catch((function(e){401===e.response.status?x().fire("401 session expired..!","Please re-login"):x().fire(e.response.data.message,"Please try again later")}))},children:function(e){var t=e.values,a=e.handleChange,s=e.handleSubmit,r=e.errors,i=e.touched,o=e.handleBlur,m=(e.isValid,e.dirty,e.setFieldValue);return(0,T.jsxs)(d.l0,{className:"add-edit-user-form",onSubmit:s,autoComplete:"off",children:[(0,T.jsxs)(c.eW,{className:"cardbgw",children:[(0,T.jsxs)(c.X2,{children:[(0,T.jsxs)(c.JX,{md:4,children:[(0,T.jsxs)(c.__,{for:"",children:["Title",(0,T.jsx)("span",{className:"required",children:"*"})," "]}),(0,T.jsx)(c.II,{type:"text",name:"title",placeholder:"Title",value:t.title,onChange:a,onBlur:o,invalid:i.title&&!!r.title}),(0,T.jsx)(d.Bc,{name:"title",component:"div",className:"errmsg"})]}),(0,T.jsxs)(c.JX,{md:4,children:[(0,T.jsxs)(c.__,{for:"eventType",children:["Type of event",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(l.ZP,{name:"eventType",value:t.eventType,options:F,onChange:function(e){var t;m("eventType",e),t=e,u.Z.get("event-type/".concat(t.value,"/all-event-mapping")).then((function(e){var t=[];e.data.map((function(e,n){t.push({value:e.id,label:e.name})})),V(t)})).catch((function(e){x().fire(e.response.data.message,"Please try again ")})),m("eventCategory","")},invalid:i.eventType&&!!r.eventType}),(0,T.jsx)(d.Bc,{name:"eventType",component:"div",className:"errmsg"})]}),(0,T.jsxs)(c.JX,{md:4,children:[(0,T.jsxs)(c.__,{for:"eventCategory",children:["Category of event",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(l.ZP,{name:"eventCategory",value:t.eventCategory,options:w,onChange:function(e){return m("eventCategory",e)},invalid:i.eventCategory&&!!r.eventCategory}),(0,T.jsx)(d.Bc,{name:"eventCategory",component:"div",className:"errmsg"})]})]}),(0,T.jsx)("br",{}),(0,T.jsxs)(c.X2,{children:[(0,T.jsxs)(c.JX,{md:3,className:"dayschange",children:[(0,T.jsx)(c.X2,{children:(0,T.jsx)(c.cw,{switch:!0,children:(0,T.jsxs)(c.__,{children:[(0,T.jsx)(c.II,{type:"switch",name:"alldayCheck",onChange:O,checked:n.alldayCheck}),"All Day"]})})}),(0,T.jsx)(c.X2,{children:(0,T.jsx)(c.cw,{switch:!0,children:(0,T.jsxs)(c.__,{children:[(0,T.jsx)(c.II,{type:"switch",name:"customCheck",onChange:M,checked:n.customCheck}),"Custom Range"]})})})]}),(0,T.jsxs)(c.JX,{md:8,children:[n.alldayCheck&&(0,T.jsxs)(c.X2,{className:"rowextend",children:[(0,T.jsx)(c.JX,{md:4,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:["Date",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(j(),{name:"startDateAll",selected:t.startDateAll?t.startDateAll:null,onChange:function(e){return m("startDateAll",e)},onBlur:function(){setFieldTouched("startDateAll")},minDate:new Date,placeholderText:"mm/dd/yyyy"}),(0,T.jsx)(d.Bc,{name:"startDateAll",component:"div",className:"errmsg"})]})}),(0,T.jsx)(c.JX,{md:4,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[" Start Time",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(j(),{name:"startTimeAll",selected:t.startTimeAll?t.startTimeAll:null,onChange:function(e){return m("startTimeAll",e)},onBlur:function(){setFieldTouched("startTimeAll")},placeholderText:"--:-- --",showTimeSelect:!0,showTimeSelectOnly:!0,timeCaption:"Time",dateFormat:"h:mm aa"}),(0,T.jsx)(d.Bc,{name:"startTimeAll",component:"div",className:"errmsg"})]})}),(0,T.jsx)(c.JX,{md:4,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[" End Time",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(j(),{name:"endTimeAll",selected:t.endTimeAll?t.endTimeAll:null,onChange:function(e){return m("endTimeAll",e)},onBlur:function(){setFieldTouched("endTimeAll")},placeholderText:"--:-- --",showTimeSelect:!0,showTimeSelectOnly:!0,timeCaption:"Time",dateFormat:"h:mm aa",minTime:new Date(new Date(t.startTimeAll).getTime()+9e5),maxTime:(new Date).setHours(23,59,59)}),(0,T.jsx)(d.Bc,{name:"endTimeAll",component:"div",className:"errmsg"})]})})]}),!0===n.customCheck?(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(c.X2,{children:[(0,T.jsxs)(c.JX,{md:3,children:[(0,T.jsxs)(c.__,{children:["Start Date",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(j(),{name:"startDate",selected:t.startDate?new Date(t.startDate):null,onChange:function(e){return m("startDate",e)},onBlur:function(){setFieldTouched("startDate")},minDate:new Date,placeholderText:"mm/dd/yyyy"}),(0,T.jsx)(d.Bc,{name:"startDate",component:"div",className:"errmsg"})]}),(0,T.jsxs)(c.JX,{md:3,children:[(0,T.jsxs)(c.__,{children:["End Date",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(j(),{name:"endDate",selected:t.endDate?new Date(t.endDate):null,onChange:function(e){return m("endDate",e)},onBlur:function(){setFieldTouched("endDate")},minDate:t.startDate,placeholderText:"mm/dd/yyyy"}),(0,T.jsx)(d.Bc,{name:"endDate",component:"div",className:"errmsg"})]}),(0,T.jsx)(c.JX,{md:3,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[" Start Time",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(j(),{name:"startTime",selected:t.startTime?t.startTime:null,onChange:function(e){return m("startTime",e)},onBlur:function(){setFieldTouched("startTime")},placeholderText:"--:-- --",showTimeSelect:!0,showTimeSelectOnly:!0,timeCaption:"Time",dateFormat:"h:mm aa"}),(0,T.jsx)(d.Bc,{name:"startTime",component:"div",className:"errmsg"})]})}),(0,T.jsx)(c.JX,{md:3,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[" End Time",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(j(),{name:"endTime",selected:t.endTime?t.endTime:null,onChange:function(e){return m("endTime",e)},onBlur:function(){setFieldTouched("endTime")},placeholderText:"--:-- --",showTimeSelect:!0,showTimeSelectOnly:!0,timeCaption:"Time",dateFormat:"h:mm aa",minTime:new Date(new Date(t.startTime).getTime()+3e5),maxTime:(new Date).setHours(23,59,59)}),(0,T.jsx)(d.Bc,{name:"endTime",component:"div",className:"errmsg"})]})})]})}):null]})]}),(0,T.jsx)(c.X2,{children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{for:"eventBody",children:["Description",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(c.II,{name:"description",value:t.description,type:"textarea",placeholder:"Content here...",onChange:a,onBlur:o,rows:"2",invalid:i.description&&!!r.description}),(0,T.jsx)(d.Bc,{name:"description",component:"div",className:"errmsg"})]})}),(0,T.jsxs)("div",{children:[(0,T.jsx)("h5",{children:(0,T.jsx)("strong",{children:"Pricing Details"})}),(0,T.jsx)("hr",{}),(0,T.jsxs)(c.X2,{children:[(0,T.jsxs)(c.JX,{md:6,children:[(0,T.jsxs)(c.__,{for:"",children:["Event Fee $ ",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(c.II,{type:"number",placeholder:"Per day fee ",name:"perdayFee",value:t.perdayFee,onChange:a,onBlur:o,invalid:i.perdayFee&&!!r.perdayFee}),(0,T.jsx)(d.Bc,{name:"perdayFee",component:"div",className:"errmsg"})]}),(0,T.jsxs)(c.JX,{md:6,children:[(0,T.jsx)(c.__,{for:"",children:"Registration Fee $  "}),(0,T.jsx)(c.II,{type:"number",placeholder:"Registration fee",name:"registrationFee",value:t.registrationFee,onChange:a,onBlur:o})]})]}),(0,T.jsx)("br",{}),(0,T.jsx)(c.X2,{children:!0===n.customCheck?(0,T.jsx)(d.F2,{name:"pricingLoopValues",render:function(e){var n=t.pricingLoopValues;return(0,T.jsx)("div",{children:n&&n.length>0?n.map((function(t,n){return(0,T.jsx)("div",{children:(0,T.jsxs)(c.X2,{className:"rowextend2",children:[(0,T.jsx)(c.JX,{md:3,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[0===n?"Attending Days ":"",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(d.gN,{children:function(e){e.field;var a=e.form;return(0,T.jsx)(l.ZP,{name:"mathValue",options:S,value:t.mathValue||"",onChange:function(e){return a.setFieldValue("pricingLoopValues.".concat(n,".mathValue"),e)},onBlur:function(){a.setFieldTouched("pricingLoopValues.".concat(n,".mathValue"))}})}}),(0,T.jsx)(d.Bc,{name:"pricingLoopValues.".concat(n,".mathValue"),component:"div",className:"errmsg"})]})}),(0,T.jsx)(c.JX,{md:2,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[" ",0===n?"Days":"",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(c.II,{type:"number",placeholder:"Days count",name:"pricingLoopValues.".concat(n,".greaterlessnumber"),min:"1",step:"1",onChange:a,onBlur:o,value:t.greaterlessnumber||""}),(0,T.jsx)(d.Bc,{name:"pricingLoopValues.".concat(n,".greaterlessnumber"),component:"div",className:"errmsg"})]})}),(0,T.jsx)(c.JX,{md:2,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[" ",0===n?"Then Apply":"",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(c.II,{type:"number",placeholder:"Less amount",name:"pricingLoopValues.".concat(n,".discountfeeNumber"),min:"1",step:"1",onChange:a,onBlur:o,value:t.discountfeeNumber||""}),(0,T.jsx)(d.Bc,{name:"pricingLoopValues.".concat(n,".discountfeeNumber"),component:"div",className:"errmsg"})]})}),(0,T.jsx)(c.JX,{md:2,children:(0,T.jsxs)(c.cw,{children:[(0,T.jsxs)(c.__,{children:[" ",0===n?"Discount/Fee":"",(0,T.jsx)("span",{className:"required",children:"*"})]}),(0,T.jsx)(d.gN,{children:function(e){e.field;var a=e.form;return(0,T.jsx)(l.ZP,{name:"discountfeeValue",value:t.discountfeeValue||"",onChange:function(e){return a.setFieldValue("pricingLoopValues.".concat(n,".discountfeeValue"),e)},onBlur:function(){a.setFieldTouched("pricingLoopValues.".concat(n,".discountfeeValue"))},options:P})}}),(0,T.jsx)(d.Bc,{name:"pricingLoopValues.".concat(n,".discountfeeValue"),component:"div",className:"errmsg"})]})}),(0,T.jsxs)(c.JX,{md:3,children:[(0,T.jsx)(c.zx,{color:"success",onClick:function(){return e.push({mathValue:"",greaterlessnumber:"",discountfeeValue:"",discountfeeNumber:""})},id:"plusbutton",children:(0,T.jsx)("i",{className:"fa fa-plus","aria-hidden":"true",id:"plusicon"})})," \xa0",n?(0,T.jsx)(c.zx,{color:"danger",onClick:function(){e.remove(n)},id:"minusbutton",children:(0,T.jsx)("i",{className:"fa fa-minus","aria-hidden":"true",id:"minusicon"})}):null]})]})},n)})):null})}}):""})]})]}),(0,T.jsxs)(c.iR,{id:"cardfootercolor",children:[(0,T.jsx)(c.zx,{color:"secondary",size:"md",type:"button",id:"cancelbutton",onClick:function(){return L(-1)},children:"Cancel"})," ","new"===R.id?(0,T.jsx)(c.zx,{color:"primary",size:"md",id:"savebutton",type:"submit",children:"new"===R.id&&"Save"}):""]})]})}})})}),(0,T.jsx)(c.JX,{md:4,children:(0,T.jsx)(c.Mo,{alt:"Card image cap",src:f,bottom:!0})})]})]})]})}}}]);
//# sourceMappingURL=2341.09e91c52.chunk.js.map