"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5839],{10003:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(29439),r=a(72791),i=a(70697),l=(a(87092),a(66293)),o=a(80184);function s(e){var t=(0,r.useState)({totalDocs:e.totalPages,currentPage:e.currentPage}),a=(0,n.Z)(t,2),s=a[0];a[1];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.Z,{showTotal:function(e,t){return"".concat(t[0]," - ").concat(t[1]," of ").concat(e," items")},showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,defaultPageSize:e.defaultPageSize,defaultCurrent:s.currentPage,onShowSizeChange:function(e){console.log("onShowSizeChange",e)},onChange:function(t){e.callbackfunc(t)},total:s.totalDocs,locale:l.Z})})}},25839:function(e,t,a){a.r(t);var n=a(1413),r=a(29439),i=a(72791),l=a(57689),o=a(11087),s=a(84951),c=a(30212),d=a(63263),u=a(10003),h=a(21830),f=a.n(h),g=a(80184);t.default=function(){var e=(0,i.useState)({allusersList:[],totalPages:"",currentPage:"",loader:!1,permissions:{canCreate:!0,canView:!0,canUpdate:!0,canDelete:!0}}),t=(0,r.Z)(e,2),a=t[0],h=t[1],m=a.allusersList,p=a.totalPages,x=a.currentPage,j=a.loader,S=a.permissions,F=(0,l.s0)(),Z=function(e){h((function(e){return(0,n.Z)((0,n.Z)({},e),{},{loader:!0})})),d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.get("".concat("http://3.144.153.218:8080/api/v1/","users/pagination?page=").concat(e-1,"&size=10&sort=id,desc")).then((function(e){console.log("res",e),h((function(t){return(0,n.Z)((0,n.Z)({},t),{},{allusersList:e.data.content,totalPages:e.data.totalElements,currentPage:e.data.pageNumber+1,loader:!1})})),401==e.status&&(f().fire({title:"error",icon:"error",text:"Session Expired"}),navigate("/login"))})).catch((function(e){f().fire(e.response.data.message,"Please try again "),h((function(e){return(0,n.Z)((0,n.Z)({},e),{},{loader:!1,studentList:[]})}))}))};(0,i.useEffect)((function(){var e=localStorage.getItem("userid");d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.get("".concat("http://3.144.153.218:8080/api/v1/","auth/users/").concat(e)).then((function(e){var t=e.data.roles?e.data.roles[0].users:null;h((function(e){return(0,n.Z)((0,n.Z)({},e),{},{permissions:t})}))})).catch((function(e){})),Z("1")}),[]);return(0,g.jsxs)(g.Fragment,{children:[j?(0,g.jsx)(s.$j,{className:"loaderr",color:"primary",children:"Loading..."}):null,(0,g.jsxs)(s.eW,{className:"cardbg",children:[(0,g.jsxs)(s.X2,{children:[(0,g.jsx)(s.JX,{children:(0,g.jsx)("h4",{children:(0,g.jsx)("strong",{children:"Users List "})})}),(0,g.jsx)(s.JX,{children:S.canCreate?(0,g.jsx)(s.zx,{outline:!0,color:"info",size:"sm",className:"buttonfloat",onClick:function(){return F("/staff/createstaff/new")},children:"Add User "}):null})]}),(0,g.jsx)(s.X2,{children:(0,g.jsx)(s.JX,{children:(0,g.jsxs)(s.Zb,{children:[(0,g.jsxs)(c.c8,{data:m,keyField:"sno",search:!0,striped:!0,hover:!0,multiColumnSearch:!0,version:"4",children:[(0,g.jsx)(c.bY,{width:"00",dataAlign:"left",dataField:"sno",dataFormat:function(e,t,a,n){return(0,g.jsx)(g.Fragment,{children:n+1})},dataSort:!0,children:"S No"}),(0,g.jsx)(c.bY,{width:"160",dataAlign:"left",dataField:"name",dataFormat:function(e,t){return(0,g.jsx)("span",{children:t?"".concat(t.firstName," ").concat(t.lastName):null})},children:"Name"}),(0,g.jsx)(c.bY,{width:"160",dataAlign:"left",dataField:"email",dataSort:!0,children:"Email"}),(0,g.jsx)(c.bY,{width:"100",dataAlign:"left",dataField:"phone",children:"Phone"}),(0,g.jsx)(c.bY,{width:"100",dataAlign:"left",dataField:"user",dataSort:!0,dataFormat:function(e,t){return(0,g.jsx)(g.Fragment,{children:t.roles?t.roles[0].roleName:null})},children:"User Type"}),(0,g.jsx)(c.bY,{width:"100",dataAlign:"left",dataField:"employment",dataSort:!0,dataFormat:function(e,t){return(0,g.jsx)(g.Fragment,{children:t.employmentType?t.employmentType.name:null})},children:"Employment Type"}),(0,g.jsx)(c.bY,{width:"80",dataAlign:"left",dataField:"pin",dataSort:!0,children:"Pin"}),(0,g.jsx)(c.bY,{width:"80",dataAlign:"left",dataField:"id",dataFormat:function(e){return function(e){return(0,g.jsx)("span",{children:S.canUpdate?(0,g.jsx)(o.rU,{id:e,to:"/staff/createstaff/".concat(e),children:(0,g.jsx)("i",{className:"fa fa-pencil",id:"pencilspace","aria-hidden":"true"})}):null})}(e)},children:"Action"})]}),(0,g.jsx)(s.iR,{children:m.length>=1?(0,g.jsx)(u.Z,{totalPages:p,currentPage:x,callbackfunc:function(e){Z(e)},defaultPageSize:"10"}):null})]})})}),(0,g.jsx)(s.X2,{})]})]})}}}]);
//# sourceMappingURL=5839.b3763cd5.chunk.js.map