"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6768],{86768:function(e,t,a){a.r(t);var n=a(1413),s=a(29439),r=a(72791),l=a(57689),i=a(84951),c=a(30212),o=a(18491),u=(a(24021),a(77710),a(9085)),d=(a(5462),a(63263)),h=a(72426),m=a.n(h),f=a(21830),p=a.n(f),x=a(59513),g=a.n(x),j=(a(10303),a(80184)),v=m()(new Date).format("YYYY-MM-DD");t.default=function(){var e=(0,r.useState)({startDate:new Date,master:null,program:null,class:null,loader:!1}),t=(0,s.Z)(e,2),a=t[0],h=t[1],f=(0,r.useState)([]),x=(0,s.Z)(f,2),b=(x[0],x[1]),S=(0,r.useState)([]),Z=(0,s.Z)(S,2),w=(Z[0],Z[1],(0,r.useState)([])),y=(0,s.Z)(w,2),D=(y[0],y[1],(0,r.useState)("")),_=(0,s.Z)(D,2),L=(_[0],_[1],(0,r.useState)("")),N=(0,s.Z)(L,2),Y=(N[0],N[1],(0,r.useState)([])),F=(0,s.Z)(Y,2),k=F[0],I=F[1],C=(0,r.useState)([]),P=(0,s.Z)(C,2),T=P[0],B=P[1];(0,l.s0)();(0,r.useEffect)((function(){d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.get("".concat("http://18.220.167.178:8080/api/v1/","api/program-names")).then((function(e){var t=[];e.data.map((function(e,a){t.push({value:e.id,label:e.name})})),b(t)})).catch((function(e){401===e.response.status?p().fire("401 session expired..!","Please re-login"):p().fire("Oops, something went wrong. Please try again later")}))}),[]);var z={startDate:a.startDate,master:a.master,class:a.class},A={mode:"checkbox",showOnlySelected:!0,onSelect:function(e,t,s,r){if(t){var l=T;l.push(e),setTimeout((function(){B(l),h((0,n.Z)({},a))}),500)}else{var i=[];T.map((function(t,a){t.studentId!==e.studentId&&i.push(t)})),setTimeout((function(){B(i)}),500)}},onSelectAll:function(e,t,a){e&&B(t),e||B([])}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.Ix,{}),a.loader?(0,j.jsx)(i.$j,{className:"loaderr",color:"primary",children:"Loading..."}):null,(0,j.jsx)(i.Zb,{children:(0,j.jsxs)(i.eW,{className:"cardbg",children:[(0,j.jsx)("h4",{children:(0,j.jsxs)("strong",{children:["Belt Testing (",v,")"]})}),(0,j.jsx)(i.Zb,{className:"attendencecard",children:(0,j.jsx)(o.J9,{enableReinitialize:"true",initialValues:z,onSubmit:function(e){var t=[];T.map((function(e,a){t.push({levelId:e.currentLevel?e.currentLevel.id:null,studentId:e.studentId,certificateName:e.certificate&&e.certificate.backgroundPhoto?e.certificate.backgroundPhoto:null})})),setTimeout((function(){d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.post("".concat("http://18.220.167.178:8080/api/v1/api","/level-testing/promote"),t).then((function(e){201===e.status&&(u.Am.success("Successfully",{theme:"colored"}),B([]))})).catch((function(e){401===e.response.status?p().fire("401 session expired..!","Please re-login"):p().fire(e.response.data.message,"Please try again later")}))}),500)},children:function(e){var t=e.values,a=(e.handleChange,e.handleSubmit);e.errors,e.touched,e.handleBlur,e.isValid,e.dirty,e.setFieldValue;return(0,j.jsx)(o.l0,{className:"add-edit-user-form",onSubmit:a,children:(0,j.jsxs)(i.X2,{children:[(0,j.jsx)(i.JX,{md:3,children:(0,j.jsxs)(i.cw,{children:[(0,j.jsx)(i.__,{for:"startDate",children:"Search By Date"}),(0,j.jsx)(g(),{className:"studentsattendancecolor",name:"startDate",selected:t.startDate?new Date(t.startDate):null,onChange:function(e){return function(e,t){t.startDate=e,h((0,n.Z)({},t));var a=m()(e).format("YYYY-MM-DD");d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.get("".concat("http://18.220.167.178:8080/api/v1/api","/student-statuses/").concat(a)).then((function(e){console.log("res",e),200===e.status&&I(e.data)})).catch((function(e){p().fire(e.response.data.message,"Please try again later")}))}(e,t)},placeholderText:"mm/dd/yyyy"})]})}),(0,j.jsx)(i.JX,{md:2,children:(0,j.jsx)(i.cw,{style:{marginTop:"14%"},children:(0,j.jsx)(i.zx,{type:"submit",disabled:T.length<=0,children:"Promote"})})})]})})}})}),(0,j.jsx)("hr",{}),(0,j.jsx)(i.X2,{className:"rowborder",children:(0,j.jsx)(i.Zb,{className:"marginStyleForTablee",children:(0,j.jsxs)(c.c8,{data:k,selectRow:A,keyField:"studentId",search:!0,tableContainerClass:"studenttablescro",multiColumnSearch:"true",children:[(0,j.jsx)(c.bY,{width:"100",dataField:"studentId",hidden:!0,children:"unique field"}),(0,j.jsx)(c.bY,{width:"150",dataField:"studentName",children:"Student Name"}),(0,j.jsx)(c.bY,{width:"150",dataField:"currentLevel",dataFormat:function(e,t){return(0,j.jsx)("span",{children:t.currentLevel.name?t.currentLevel.name:null})},children:"Current Level"}),(0,j.jsx)(c.bY,{width:"130",dataField:"nextLevel",dataFormat:function(e,t){return(0,j.jsx)("span",{children:t.nextLevel.name?t.nextLevel.name:null})},children:"Next Level"}),(0,j.jsx)(c.bY,{width:"100",dataField:"phone",dataFormat:function(e,t){var a="";return t.subLevels&&t.subLevels.map((function(e,t){a=0===t?e.shortName:a+", "+e.shortName})),a},children:"Tip"})]})})}),(0,j.jsx)(i.X2,{})]})})]})}}}]);
//# sourceMappingURL=6768.1cfb0d4a.chunk.js.map