"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8844],{78844:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});var r=t(4942),n=t(1413),i=t(29439),o=t(72791),c=t(57689),s=t(84951),d=t(18491),l=t(24021),m=t(22976),u=t(77710),p=t(21830),g=t.n(p),h=(t(72426),t(63263)),f=t(9085),j=t(80184),x={programName:"",selectAwards:"",awardsOptions:[],backgroundImage:"",bodyCopy:"",stname:"Student name",imageName:"",loader:!1},y=function(){var e=(0,o.useState)(x),a=(0,i.Z)(e,2),t=a[0],p=a[1],y=(0,o.useState)(""),b=(0,i.Z)(y,2),v=b[0],N=b[1],Z=(t.programName,t.selectAwards),C=t.awardsOptions,w=(t.backgroundImage,t.bodyCopy),_=t.stname,k=t.imageName,A=t.loader,I=(0,c.s0)(),P=(0,c.UO)(),B=function(e,a){p((function(t){return(0,n.Z)((0,n.Z)({},t),{},(0,r.Z)({},e,a.target.value))}))};return(0,o.useEffect)((function(){"new"!==P.id&&u.Z.get("/certificate/".concat(P.id)).then((function(e){p((function(a){return(0,n.Z)((0,n.Z)({},a),{},{programName:e.data.name,selectAwards:{value:e.data.level.id,label:e.data.level.name},imageName:e.data.backgroundPhoto,bodyCopy:e.data.templateBody})})),N("http://3.144.153.218:8080/api/v1/auth/certificate/image/"+e.data.backgroundPhoto)})).catch((function(e){g().fire(e.response.data.message,"Please try again ")})),u.Z.get("level").then((function(e){var a=[];e.data.map((function(e,t){a.push({value:e.id,label:e.name})})),p((function(e){return(0,n.Z)((0,n.Z)({},e),{},{awardsOptions:a})}))})).catch((function(e){g().fire(e.response.data.message,"Please try again ")}))}),[]),(0,j.jsxs)(j.Fragment,{children:[" ",A?(0,j.jsx)(s.$j,{className:"loaderr",color:"primary",children:"Loading..."}):null,(0,j.jsx)(f.Ix,{}),(0,j.jsx)(s.Zb,{className:"cardm",children:(0,j.jsx)(s.eW,{className:"cardbg",children:(0,j.jsx)(d.J9,{enableReinitialize:!0,initialValues:t,validationSchema:function(){return l.object().shape({programName:l.string().required("Program Name is Required"),selectAwards:l.object().required("Awards is Required"),bodyCopy:l.string().required("Body is Required")})},onSubmit:function(e){if(""===k&&g().fire("Please Select Background Image"),"new"!==P.id){var a={name:e.programName,backgroundPhoto:e.imageName,templateBody:e.bodyCopy};h.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),h.Z.put("".concat("http://3.144.153.218:8080/api/v1/","api/level/").concat(Z.value,"/certificate/").concat(P.id),a).then((function(e){f.Am.info("Updated successfully",{theme:"colored"}),setTimeout((function(){I("/certifications")}),1e3)})).catch((function(e){g().fire(e.response.data.message,"Please try again later")}))}else{p((function(e){return(0,n.Z)((0,n.Z)({},e),{},{loader:!0})}));var t={name:e.programName,backgroundPhoto:e.imageName,templateBody:e.bodyCopy};h.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),h.Z.post("".concat("http://3.144.153.218:8080/api/v1/api","/level/").concat(Z.value,"/certificate"),t).then((function(e){f.Am.success("Registered successfully",{theme:"colored"}),p((function(e){return(0,n.Z)((0,n.Z)({},e),{},{loader:!1})})),setTimeout((function(){I("/certifications")}),1e3)})).catch((function(e){p((function(e){return(0,n.Z)((0,n.Z)({},e),{},{loader:!1})})),g().fire(e.response.data.message,"Please try again ")}))}},children:function(e){var a=e.values,t=e.setFieldValue,i=(e.handleChange,e.handleSubmit);e.handleBlur,e.errors,e.touched;return(0,j.jsx)(d.l0,{onSubmit:i,children:(0,j.jsxs)(s.Zb,{className:"cardbgw",children:[(0,j.jsxs)(s.Ol,{children:[" ",(0,j.jsx)("h5",{children:(0,j.jsx)("strong",{children:"Certification"})})," "]}),(0,j.jsxs)(s.eW,{children:[(0,j.jsx)(s.X2,{children:(0,j.jsxs)(s.JX,{md:12,children:[(0,j.jsx)(s.__,{for:"programName",children:" Program Name "}),(0,j.jsx)(s.II,{name:"programName",type:"text",value:a.programName,onChange:function(e){return B("programName",e)}}),(0,j.jsx)(d.Bc,{name:"programName",component:"div",className:"errmsg"})]})}),(0,j.jsxs)(s.X2,{children:[(0,j.jsxs)(s.JX,{md:5,children:[(0,j.jsx)(s.__,{for:"selectName",children:"Awards"}),(0,j.jsx)(m.ZP,{name:"selectAwards",value:Z,onChange:function(e){t("selectAwards",e),function(e,a){p((function(t){return(0,n.Z)((0,n.Z)({},t),{},(0,r.Z)({},e,a))}))}("selectAwards",e)},options:C}),(0,j.jsx)(d.Bc,{name:"selectAwards",component:"div",className:"errmsg"})]}),(0,j.jsxs)(s.JX,{md:7,children:[(0,j.jsx)(s.__,{for:"programName",children:" BackGround Image "}),(0,j.jsx)(s.II,{name:"backgroundImage",type:"file",accept:".jpg, .jpeg, .png",value:a.backgroundImage,onChange:function(e){return function(e){var a=URL.createObjectURL(e.target.files[0]);N(a);var t=new FormData;t.append("image",e.target.files[0]),h.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),h.Z.post("".concat("http://3.144.153.218:8080/api/v1/api","/certificate/image/upload"),t).then((function(e){p((function(a){return(0,n.Z)((0,n.Z)({},a),{},{imageName:e.data.imageName})}))})).catch((function(e){g().fire(e.response.data.message,"Please try again ")}))}(e)}})]})]}),(0,j.jsx)(s.X2,{children:(0,j.jsxs)(s.JX,{md:12,children:[(0,j.jsx)(s.__,{for:"bodyCopy",children:"Body Copy "}),(0,j.jsx)(s.II,{name:"bodyCopy",type:"textarea",value:a.bodyCopy,onChange:function(e){return B("bodyCopy",e)},placeholder:"content display in certification...",rows:"2 "}),(0,j.jsx)(d.Bc,{name:"bodyCopy",component:"div",className:"errmsg"})]})}),(0,j.jsx)(s.X2,{children:(0,j.jsxs)(s.JX,{md:4,children:[(0,j.jsx)(s.__,{for:"preview",children:"Preview "}),(0,j.jsx)("div",{className:"App",children:(0,j.jsx)("div",{id:"downloadWrapper",children:(0,j.jsxs)("div",{id:"certificateWrapper",children:[(0,j.jsx)("p",{className:"name",children:_}),(0,j.jsx)("img",{src:""==v?"https://i.imgur.com/Toz3PUWh.png":v,alt:"Certificate"}),(0,j.jsx)("p",{className:"bodyCopy",children:w})]})})})]})})]}),(0,j.jsxs)(s.iR,{className:"centerTextalign",children:[(0,j.jsx)(s.zx,{type:"button",color:"secondary",className:"btnbg",size:"sm",onClick:function(){I("/certifications")},children:"Cancel"}),(0,j.jsx)(s.zx,{type:"submit",color:"primary",size:"sm",children:"Save"})]})]})})}})})})]})}}}]);
//# sourceMappingURL=8844.228d6f6e.chunk.js.map