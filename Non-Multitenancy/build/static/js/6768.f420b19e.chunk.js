"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6768],{86768:function(e,t,a){a.r(t);var n=a(1413),s=a(29439),r=a(72791),l=a(57689),i=a(84951),c=a(30212),u=a(18491),d=(a(24021),a(77710)),o=a(9085),h=(a(5462),a(63263)),m=a(72426),f=a.n(m),x=a(21830),p=a.n(x),j=a(59513),g=a.n(j),v=(a(10303),a(80184)),b=f()(new Date).format("YYYY-MM-DD");t.default=function(){var e=(0,r.useState)({startDate:new Date,master:null,program:null,class:null,loader:!1}),t=(0,s.Z)(e,2),a=t[0],m=t[1],x=(0,r.useState)([]),j=(0,s.Z)(x,2),S=(j[0],j[1]),Z=(0,r.useState)([]),w=(0,s.Z)(Z,2),y=(w[0],w[1],(0,r.useState)([])),D=(0,s.Z)(y,2),_=(D[0],D[1],(0,r.useState)("")),L=(0,s.Z)(_,2),N=(L[0],L[1],(0,r.useState)("")),Y=(0,s.Z)(N,2),F=(Y[0],Y[1],(0,r.useState)([])),k=(0,s.Z)(F,2),I=k[0],C=k[1],P=(0,r.useState)([]),T=(0,s.Z)(P,2),B=T[0],X=T[1];(0,l.s0)();(0,r.useEffect)((function(){h.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),h.Z.get("".concat("http://3.131.55.208:8080/api/v1/","api/program-names")).then((function(e){var t=[];e.data.map((function(e,a){t.push({value:e.id,label:e.name})})),S(t)})).catch((function(e){401===e.response.status?p().fire("401 session expired..!","Please re-login"):p().fire("Oops, something went wrong. Please try again later")}))}),[]);var z={startDate:a.startDate,master:a.master,class:a.class},A={mode:"checkbox",showOnlySelected:!0,onSelect:function(e,t,s,r){if(t){var l=B;l.push(e),setTimeout((function(){X(l),m((0,n.Z)({},a))}),500)}else{var i=[];B.map((function(t,a){t.studentId!==e.studentId&&i.push(t)})),setTimeout((function(){X(i)}),500)}},onSelectAll:function(e,t,a){e&&X(t),e||X([])}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.Ix,{}),a.loader?(0,v.jsx)(i.$j,{className:"loaderr",color:"primary",children:"Loading..."}):null,(0,v.jsx)(i.Zb,{children:(0,v.jsxs)(i.eW,{className:"cardbg",children:[(0,v.jsx)("h4",{children:(0,v.jsxs)("strong",{children:["Belt Testing (",b,")"]})}),(0,v.jsx)(i.Zb,{className:"attendencecard",children:(0,v.jsx)(u.J9,{enableReinitialize:"true",initialValues:z,onSubmit:function(e){var t=[];B.map((function(e,a){t.push({levelId:e.currentLevel?e.currentLevel.id:null,studentId:e.studentId,certificateName:e.certificate&&e.certificate.backgroundPhoto?e.certificate.backgroundPhoto:null})})),setTimeout((function(){h.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),h.Z.post("".concat("http://3.131.55.208:8080/api/v1/api","/level-testing/promote"),t).then((function(e){201===e.status&&(o.Am.success("Successfully",{theme:"colored"}),X([]))})).catch((function(e){401===e.response.status?p().fire("401 session expired..!","Please re-login"):p().fire(e.response.data.message,"Please try again later")}))}),500)},children:function(e){var t=e.values,a=(e.handleChange,e.handleSubmit);e.errors,e.touched,e.handleBlur,e.isValid,e.dirty,e.setFieldValue;return(0,v.jsx)(u.l0,{className:"add-edit-user-form",onSubmit:a,children:(0,v.jsxs)(i.X2,{children:[(0,v.jsx)(i.JX,{md:3,children:(0,v.jsxs)(i.cw,{children:[(0,v.jsx)(i.__,{for:"startDate",children:"Search By Date"}),(0,v.jsx)(g(),{className:"studentsattendancecolor",name:"startDate",selected:t.startDate?new Date(t.startDate):null,onChange:function(e){return function(e,t){t.startDate=e,m((0,n.Z)({},t));var a=f()(e).format("YYYY-MM-DD");d.Z.get("student-statuses/".concat(a)).then((function(e){200===e.status&&C(e.data)})).catch((function(e){p().fire(e,"Please try again later")}))}(e,t)},placeholderText:"mm/dd/yyyy"})]})}),(0,v.jsx)(i.JX,{md:2,children:(0,v.jsx)(i.cw,{style:{marginTop:"14%"},children:(0,v.jsx)(i.zx,{type:"submit",disabled:B.length<=0,children:"Promote"})})})]})})}})}),(0,v.jsx)("hr",{}),(0,v.jsx)(i.X2,{className:"rowborder",children:(0,v.jsx)(i.Zb,{className:"marginStyleForTablee",children:(0,v.jsxs)(c.c8,{data:I,selectRow:A,keyField:"studentId",search:!0,tableContainerClass:"studenttablescro",multiColumnSearch:"true",children:[(0,v.jsx)(c.bY,{width:"100",dataField:"studentId",hidden:!0,children:"unique field"}),(0,v.jsx)(c.bY,{width:"150",dataField:"studentName",children:"Student Name"}),(0,v.jsx)(c.bY,{width:"150",dataField:"currentLevel",dataFormat:function(e,t){return(0,v.jsx)("span",{children:t.currentLevel.name?t.currentLevel.name:null})},children:"Current Level"}),(0,v.jsx)(c.bY,{width:"130",dataField:"nextLevel",dataFormat:function(e,t){return(0,v.jsx)("span",{children:t.nextLevel.name?t.nextLevel.name:null})},children:"Next Level"}),(0,v.jsx)(c.bY,{width:"100",dataField:"phone",dataFormat:function(e,t){var a="";return t.subLevels&&t.subLevels.map((function(e,t){a=0===t?e.shortName:a+", "+e.shortName})),a},children:"Tip"})]})})}),(0,v.jsx)(i.X2,{})]})})]})}}}]);
//# sourceMappingURL=6768.f420b19e.chunk.js.map